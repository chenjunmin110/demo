<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

</body>
<script>
    let key = 7
    let arr = [1,1,2,2,4,2,1]

    let map = new Map()
    for (let i = 0; i < arr.length; i++) {
        map.has(arr[i]) ? map.set(arr[i], map.get(arr[i])+1) : map.set(arr[i], 1)
    }
    let max = 0
    for (const [mapKey, mapVal] of map) {
        max = Math.max(map.get(mapKey), max)
    }
    let maxArr = []
    for (const [mapKey, mapVal] of map) {
        if (mapVal === max) {
            maxArr.push(mapKey)
        }
    }

    let dd  = []

    for (let i = 0; i < maxArr.length; i++) {
        dd.push([arr.indexOf(maxArr[i]), arr.lastIndexOf(maxArr[i])])
    }
    let ff = []
    for (let i = 0; i < dd.length; i++) {
        let temp = arr.slice(dd[i][0], dd[i][1]+1)
        ff.push(temp)
    }

    console.log(ff.sort((a, b) => a.length - b.length)[0].length);

    console.log(dd, ff)

    console.log(map, max)
</script>
</html>